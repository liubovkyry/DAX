![image](https://github.com/liubovkyry/DAX/assets/118057504/7deb90cc-81c0-4738-9e23-e8da9dde6d0a)



So here's an example of the code that we're going to be writing.

We are first starting off here by defining the minimum and maximum years in our sales table.

And then from there, these inputs are then used with calendar auto to return the overall date range.

In addition to this, we're also using Add columns to tack on some extra columns to the output of the

table created using filter and calendar auto.

So for things like year, quarter name, quarter month number, so on and so forth.

And the output of this is the blow calendar table.

![image](https://github.com/liubovkyry/DAX/assets/118057504/4612fee7-bf33-46d4-b3ea-3fc0286ade1d)

<!--  -->

And what we're going to start off with is defining our variables.

### So first we have the minimum year and we first want to call the year function.

And the date that we want to return for year is the minimum of our transaction date from the calendar table.

### The next variable that we want to define is the maximum year.

And this is also starts off with the year function and we use Max here. Transaction date.



So now we've defined our minimum and maximum years.

### We can now define our return portion.


And from here we're going to start off with ADDCOLUMNS and then add in FILTER.


So what FILTER is letting us do is generate a table that we can then add columns to.

And that table is being generated by the dates between the two years based on calendar auto, right?

So we add in CALENDARAUTO and we actually close out calendar auto here.

#### Remember calendar auto without defining the fiscal year, end of month automatically starts on January 1st.

So we want to create a list of dates that starts on January 1st.

And we're going to start off with year here. Greater than or equal to mid-year.


So where did this date come from?



We don't have a table within our data model here that says just Date.

#### So what's actually happening behind the scenes is CALENDARAUTO here has generated this table of values that is referred to as Date.

So you can actually call that table within the expression after it's been declared here.

So we're saying that if the year within the calendar auto table is greater than or equal to the minimum year.

And same thing year. Date. Is less than or equal to the max year.


Then return the table that contains that.

So this is basically saying, give me a table that starts January 1st of my minimum year and ends December 31st of my maximum year.


### From here, we can now start adding our columns in.


- So we want to start off with our name and the expression here we're going to start off with is Year and same thing.

We can continue to reference this date table that's been created by calendar auto.

So we're going to continue to do that.

 - And here for quarter number.

This is going to be an integer data type and we want to format this date using Q.

And within Power BI There's a whole bunch of ways that you can use different numbers and letters like

Q, q, q, m, m, m, m to define a single quarter or a short name or a long name.


 - So here we have quarter.

And then I want to add Q. With. INT Same thing we're going to format. Our date. As.

So this column is saying you basically want to combine Q with the quarter number.


 - Next up, let's do month number.

And here all we have to do is use the month function and return the date, and that'll automatically pull the month based on the date.

 - And we could do month short and this will be similar.

We're just going to format this differently so we can actually do format.

Date. And we're going to format this as a short month. So m m m 

 - And then last, let's add in week number.

And week number. We can use the week number function.


Reference the date table created.


So we've defined our table based on the years within our calendar table, and then we've added these

additional six columns.

```
Date Table (calendarauto) = 
VAR MinYear = YEAR(MIN('Calendar'[Transaction_Date]))
VAR MaxYEar = YEAR(MAX('Calendar'[Transaction_Date]))

Return
ADDCOLUMNS(
    Filter(
        CALENDARAUTO(),
        Year([Date]) >= MinYear &&
        YEAR([Date]) <= MaxYear
    ),
    "Year", YEAR([Date]),
    "Quarter number", INT(FORMAT([Date], "q")),
    "Quarter", "Q" & INT(FORMAT([Date], "q")),
    "Month Number", MONTH([date]),
    "Month Short", FORMAT([Date], "mmm"),
    "Week Number", WEEKNUM([Date]))
```
